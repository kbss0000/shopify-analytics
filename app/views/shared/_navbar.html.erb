<!-- Accessibility Skip Link -->
<%= link_to "Skip to main content", "#main-content", class: "sr-only focus:not-sr-only focus:absolute focus:top-4 focus:left-4 focus:z-50 focus:px-4 focus:py-2 focus:bg-white focus:text-black focus:rounded-md" %>

<!-- Accessibility Skip Link -->
<%= link_to "Skip to main content", "#main-content", class: "sr-only focus:not-sr-only focus:absolute focus:top-4 focus:left-4 focus:z-50 focus:px-4 focus:py-2 focus:bg-white focus:text-black focus:rounded-md" %>

<nav class="bg-white shadow-lg mb-8">
  <div class="container mx-auto px-4">
    <div class="flex justify-between items-center py-4">
      <div class="flex items-center space-x-4">
        <%= link_to root_path, class: "text-2xl font-bold text-indigo-600" do %>
          Shopify Analytics
        <% end %>
        
        <% if current_tenant.shopify_connected? %>
          <span class="text-sm text-gray-600">
            <%= current_tenant.shopify_domain %>
          </span>
        <% end %>
      </div>

      <div class="flex items-center space-x-4">
        <%= link_to "Dashboard", dashboard_path, class: "text-gray-700 hover:text-indigo-600" %>
        
        <% if current_tenant.shopify_connected? %>
          <%= button_to "Sync Data", shopify_sync_path, method: :post, class: "bg-indigo-600 text-white px-4 py-2 rounded hover:bg-indigo-700", data: { turbo: false } %>
        <% else %>
          <%= link_to "Connect Shopify", shopify_onboarding_path, class: "bg-indigo-600 text-white px-4 py-2 rounded hover:bg-indigo-700" %>
        <% end %>

        <div class="relative group">
          <button class="flex items-center space-x-2 text-gray-700 hover:text-indigo-600">
            <span><%= current_tenant.name %></span>
            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
            </svg>
          </button>
          
          <div class="absolute right-0 w-48 mt-2 bg-white rounded-md shadow-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 z-50">
            <%= link_to "Settings", edit_tenant_registration_path, class: "block px-4 py-2 text-gray-700 hover:bg-gray-100" %>
            <%= button_to "Sign Out", destroy_tenant_session_path, method: :delete, class: "block w-full text-left px-4 py-2 text-gray-700 hover:bg-gray-100" %>
          </div>
        </div>
      </div>
    </div>
  </div>
</nav>
